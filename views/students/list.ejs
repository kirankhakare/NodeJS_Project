<!DOCTYPE html>
<html>

<head>
  <title>Students List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="/studentSearch.js"></script>
</head>

<body>
  <%- include('../partials/navbar') %><br>

  <div class="container mt-4">
    <%- include('../partials/messages') %>

    <h2 class="mb-3">Students</h2>

    <!-- Search Input -->
    <div class="form-group mb-4">
      <input type="text" class="form-control" id="searchInput" placeholder="Search by name or course..."
        onkeyup="searchStudents(this.value)">
    </div>

    <!-- Students Table -->
    <table class="table table-bordered text-center">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Course</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="tblBody">
        <% if (students.length === 0) { %>
          <tr>
            <td colspan="5" class="text-center text-danger">
              <strong>No students found in the database.</strong>
            </td>
          </tr>
        <% } else { %>
          <% students.forEach((student, index) => { %>
            <tr>
              <td><%= index + 1 %></td>
              <td><%= student.name %></td>
              <td><%= student.email %></td>
              <td><%= student.course_name %></td>
              <td>
                <a href="/students/edit/<%= student.student_id %>" class="btn btn-sm btn-warning">Edit</a>
                <a href="/students/delete/<%= student.student_id %>" class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this student?');">Delete</a>
              </td>
            </tr>
          <% }); %>
        <% } %>
      </tbody>
    </table>
  </div>
</body>

</html>
